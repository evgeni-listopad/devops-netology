# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ к задаче 1
```
1) Аппаратная виртуализация предусматривает использование гипервизора с прямым доступом к аппаратным ресурсам сервера. 
При этом не устанавливается хостовая ОС, а её функцию выполняет сам гипервизор. Гостевые ОС в виртуальных машинах могут быть любые, поддерживаемые гипервизором.
2) Паравиртуализация предусматривает использование гипервизора с отдельной хостовой ОС. Гостевые ОС в виртуальных машинах могут быть любые, поддерживаемые гипервизором.
3) Виртуализация на основе ОС также предусматривает использование хостовой ОС, при этом гостевые ОС в виртуальных машинах (или контейнерах) используют то же ядро, что и хостовая ОС.
```

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ к задаче 2
```
1) Высоконагруженная база данных, чувствительная к отказу. 
Целесообразно использовать физические сервера (либо аппаратную виртуализацию) с кластеризацией и балансировкой нагрузки. 
Поскольку база высоконагруженная, лучше балансировать нагрузку на несколько физических серверов либо на несколько виртуальных машин,
расположенных на разных физических серверах с аппаратной виртуализацией. Для обеспечения отказоустойчивости можно использовать failover или 
high availability cluster опять же на базе физических серверов либо виртуальных машин,
расположенных на разных физических серверах с аппаратной виртуализацией.
В целом, при использовании физических серверов без виртуализации все аппаратные ресурсы сервера можно отдать базе данных, 
при использовании аппаратной виртуализации - ресурсами, предоставляемыми базе данных, можно будет управлять более гибко.
2) Различные web-приложения.
Целесообразно использовать виртуализацию уровня ОС. В таком случае будет обеспечиваться максимальная гибкость 
при работе с web-приложениями, а также простота и скорость их развертывания.
3) Windows системы для использования бухгалтерским отделом.
Целесообразно использовать паравиртуализацию. В таком случае будет возможность быстро предоставлять пользователям 
виртуальные машины с Windows-системами и удобно управлять их ресурсами. При этом можно эффективно делать бэкапы и клонирование 
целых виртуальных машин, а также сформировать несколько типовых шаблонов для использования разными специалистами 
бухгалтерского отдела.
4) Системы, выполняющие высокопроизводительные расчеты на GPU.
Целесообразно использовать физические сервера, так как для приложений, выполняющих высокопроизводительные расчеты, 
нужен доступ к вычислительным ресурсам GPU. И желательно, чтобы такой доступ был без увеличения числа абстракций.
В случае использования любого типа виртуализации, необходимо было бы решать задачу проброса GPU (как устройства на шине PCI Express )
в виртуальную машину.
```

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ к задаче 3
```
1-й сценарий.
Целесообразно использовать Microsoft Hyper-V. Поскольку рассматривается преимущественно Windows-based инфраструктура,
и нет требований по использованию бесплатного решения. Также при использовании Microsoft Hyper-V будет возможность применять 
программные балансировщики нагрузки (SDN Load Balancer), репликацию данных (Реплика Hyper-V является неотъемлемой частью роли Hyper-V)
и автоматизированный механизм создания резервных копий (System Center Data Protection Manager).
2-й сценарий.
Целесообразно использовать KVM-гипервизор. Он является бесплатным open source решением, имеет хорошую совместимость и с Linux-, и с Windows-системами, 
а также при использовании virtio-драйверов обеспечивает производительность близкую к нативной.
3-й сценарий.
Целесообразно использовать гипервизор Xen PV. Он является бесплатным решением, обладает максимальной совместимостью (из бесплатных решений)
с Windows-системами и хорошей производительностью.
4-й сценарий.
Целесообразно использовать KVM-гипервизор. Поскольку окружение представлено только Linux-системами, а сценарий использования подразумевает
только тестирование программных продуктов и не предъявляет строгих требований к надежности и стабильности, то имеет смысл использовать KVM.
```

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ к задаче 4
```
Основные недостатки гетерогенной среды виртуализации заключаются в том, что она может быть неэффективна и сложна в управлении. 
Соответственно компании необходимо держать в штате набор специалистов различного профиля, что является дорогостоящим и неэффективным в долгосрочной перспективе. 
Для минимизации проблем необходимо заранее продумывать архитектуру всей ИТ-инфраструктуры, в том числе с возможностью перспективного наращивания её ресурсов, 
и исключать потребность в создании гетерогенной среды. Считаю целесообразным создание гетерогенной среды только в двух случаях:
1) В образовательных или научно-исследовательских целях;
2) В том случае, если у компании есть практически изолированные инфраструктурные сегменты (типа автономных систем), которые требуют применения разных сред виртуализации.
Например большой сегмент Windows-машин со своим доменом и вычислительный HPC-кластер, построенный на базе linux-машин.
```

