
# Домашнее задание к занятию 11.4 «Микросервисы: масштабирование»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

Обоснуйте свой выбор.

### Решение Задачи 1

Варианты решений для обеспечения развёртывания, запуска и управления приложениями:

| Name | Containers |   Service Discovery    |  Horizontal Scaling | Autoscaling | Resource separation | Configs (with secrets) |
| :---:     |  :---:  |     :---:        | :---:  |      :---:  | :--: |        :---:  |
| Kubernetes | + | + | + | + | + | + |
| Openshift | + | + | + | + | + | + |
| Tanzu | + |  + | + | + | + | + |
| Nomad | + | + (Consul) | + | + | + | + (Vault) |
| Docker swarm | + |  + | + | + | + | + |
| Mesos | + |  + | + | + | + | + |

Приведенные в таблице решения можно разделить на Kubernetes и созданные на его основе (сам Kubernetes, Openshift и Tanzu), 
а также другие самостоятельные окрестраторы (Nomad, Docker swarm, Mesos).

На данный момент самым популярным продуктом для кластеризации микросервисов является Kubernetes, который:
1. Поддерживает разные типы контейнеров (Docker, rkt, CRI-O и др.);
2. Способен обнаруживать сервисы через переменные окружения, DNS или вызовы API;
3. Поддерживает горизонтальное масштабирование (с помощью команды `kubectl` можно изменить количество реплик на всех узлах кластера);
4. Поддерживает автоматическое масштабирование autoscaling (В зависимости от нагрузки Kubernetes сам будет поддерживать нужное количество запущенных экземпляров сервиса);
5. Обеспечивает разделение ресурсов используя разные механизмы (Namespaces, NetworkPolicy, GlobalNetworkPolicy, Ingress-controller и др.);
6. Позволяет конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных. Для этого в Kubernetes есть объекты: secret, vault, env.

В целом можно утверждать, что Kubernetes обеспечивает все требуемые функции для развертывания, запуска и управления приложениями, а также имеет большое сообщество, что делает его хорошим выбором для решения указанных задач.

